{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cheol\\\\Desktop\\\\front_end\\\\src\\\\pages\\\\SimulationPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/pages/SimulationPage.jsx\nimport React, { useState, useContext, useEffect, useMemo, useRef } from 'react';\nimport { SimulationContext } from '../context/SimulationContext';\nimport BackButton from '../components/BackButton';\nimport { Client } from '@gradio/client';\n\n/** =========================\r\n * Í∏∞Ï°¥ ÏãúÎÇòÎ¶¨Ïò§ (ÏõêÎ≥∏ Ïú†ÏßÄ + ÏÜåÏÜåÌïú Í∞úÏÑ†)\r\n * ========================= */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst scenarios = [\"[OOÏùÄÌñâ] Í≥†Í∞ùÎãòÏùò Í≥ÑÏ¢åÍ∞Ä Ï†ïÏßÄÎêòÏóàÏäµÎãàÎã§. Î≥µÍµ¨Î•º ÏõêÌïòÏãúÎ©¥ ÎßÅÌÅ¨Î•º ÌÅ¥Î¶≠Ìï¥ Ï£ºÏÑ∏Ïöî: http://fakebank.com\", \"Î≥µÍµ¨Î•º ÏúÑÌï¥ Ïù∏Ï¶ùÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.\", \"Ïù∏Ï¶ùÏù¥ ÌôïÏù∏ÎêòÏßÄ ÏïäÏúºÎ©¥ Í≥ÑÏ¢åÍ∞Ä ÌèêÏáÑÎê©ÎãàÎã§. ÏßÄÍ∏à Î∞îÎ°ú Ï≤òÎ¶¨ÌïòÏÑ∏Ïöî.\"];\n\n/** =========================\r\n * Gradio AI Ïñ¥ÏãúÏä§ÌÑ¥Ìä∏ (ÎÇ¥Î∂Ä Ïª¥Ìè¨ÎÑåÌä∏)\r\n * - HTML Ïù∏ÎùºÏù∏ Ïä§ÌÅ¨Î¶ΩÌä∏Î•º React/JSÎ°ú Î≥ÄÌôò\r\n * - Ïô∏Î∂Ä script ÌÉúÍ∑∏ Î∂àÌïÑÏöî\r\n * ========================= */\nfunction AIAssistant({\n  baseUrl = \"https://2b3b80943a762565f3.gradio.live\",\n  apiName = \"/chat\"\n}) {\n  _s();\n  // DOM refs\n  const logRef = useRef(null);\n  const inputRef = useRef(null);\n  const sendRef = useRef(null);\n  const statusRef = useRef(null);\n  const readyRef = useRef(null);\n  const typingRef = useRef(null);\n\n  // ÏÉÅÌÉú\n  const [history, setHistory] = useState([]);\n  const [busy, setBusy] = useState(false);\n  const [client, setClient] = useState(null);\n  const [currentJob, setCurrentJob] = useState(null);\n\n  // ÏßÑÌñâ Ï§ë ÏûëÏóÖ ref(ÌÅ¥Î¶∞ÏóÖÏö©)\n  const jobRef = useRef(null);\n\n  // ÏÑ∏ÏÖò Ìï¥Ïãú\n  const sessionHash = useMemo(() => crypto.randomUUID(), []);\n\n  // ÏãúÍ∞Ñ Ìè¨Îß∑\n  const getTime = () => new Date().toLocaleTimeString('ko-KR', {\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n\n  // ÏÉÅÌÉú/ÌëúÏãú Ïú†Ìã∏\n  const showTyping = show => {\n    if (typingRef.current) typingRef.current.style.display = show ? 'flex' : 'none';\n  };\n  const updateStatus = (text, generating = false) => {\n    if (statusRef.current) {\n      statusRef.current.textContent = text;\n      statusRef.current.classList.toggle('generating', generating);\n    }\n  };\n  const setDotOnline = online => {\n    if (!readyRef.current) return;\n    readyRef.current.classList.toggle('online', online);\n    readyRef.current.classList.toggle('offline', !online);\n  };\n  const setBusyUI = b => {\n    setBusy(b);\n    showTyping(b);\n    if (sendRef.current) {\n      sendRef.current.disabled = b;\n      sendRef.current.classList.toggle('disabled', b);\n    }\n    updateStatus(b ? 'ÎãµÎ≥Ä ÏÉùÏÑ± Ï§ë' : 'Ïò®ÎùºÏù∏', b);\n  };\n  const finishReset = () => {\n    setBusyUI(false);\n    if (inputRef.current) inputRef.current.focus();\n    setCurrentJob(null);\n    jobRef.current = null;\n  };\n\n  // ÎßêÌíçÏÑ† Î†åÎçî (CSS ÌÅ¥ÎûòÏä§ÏôÄ ÏùºÏπò)\n  const appendBubble = (role, content) => {\n    const logEl = logRef.current;\n    if (!logEl) return;\n    const wrap = document.createElement('div');\n    wrap.className = role === 'user' ? 'ai-msg-wrap ai-user' : 'ai-msg-wrap ai-bot';\n    const avatar = document.createElement('div');\n    avatar.className = 'ai-avatar';\n    const container = document.createElement('div');\n    const bubble = document.createElement('div');\n    bubble.className = 'ai-msg';\n    bubble.textContent = content;\n    const time = document.createElement('div');\n    time.className = 'ai-time';\n    time.textContent = getTime();\n    container.appendChild(bubble);\n    container.appendChild(time);\n    if (role === 'user') {\n      wrap.appendChild(container);\n      wrap.appendChild(avatar);\n    } else {\n      wrap.appendChild(avatar);\n      wrap.appendChild(container);\n    }\n    logEl.appendChild(wrap);\n    requestAnimationFrame(() => wrap.classList.add('show'));\n    logEl.scrollTop = logEl.scrollHeight;\n  };\n  const renderFromHistory = arr => {\n    const logEl = logRef.current;\n    if (!logEl) return;\n    logEl.innerHTML = '';\n    for (const m of arr) appendBubble(m.role, m.content);\n  };\n\n  // Ï¥àÍ∏∞ Ïó∞Í≤∞ (ÎèôÏ†Å importÎ°ú Client Î°úÎìú)\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const {\n          Client\n        } = await import('https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js');\n        if (!mounted) return;\n        const c = await Client.connect(baseUrl, {\n          events: ['data', 'status']\n        });\n        setClient(c);\n        setDotOnline(true);\n        updateStatus('Ïò®ÎùºÏù∏');\n        if (inputRef.current) inputRef.current.focus();\n        setTimeout(() => {\n          setHistory(prev => {\n            const next = [...prev, {\n              role: 'assistant',\n              content: 'ÏïàÎÖïÌïòÏÑ∏Ïöî! ÌîºÏã± Î∞©Ïñ¥ AI Ïñ¥ÏãúÏä§ÌÑ¥Ìä∏ÏûÖÎãàÎã§. ÏùòÏã¨Ïä§Îü¨Ïö¥ Î©îÏãúÏßÄÎÇò ÎßÅÌÅ¨Í∞Ä ÏûàÏúºÏãúÎ©¥ Ïñ∏Ï†úÎì† ÏßàÎ¨∏Ìï¥Ï£ºÏÑ∏Ïöî. üõ°Ô∏è'\n            }];\n            renderFromHistory(next);\n            return next;\n          });\n        }, 300);\n      } catch (err) {\n        console.error(err);\n        setDotOnline(false);\n        updateStatus('Ïò§ÌîÑÎùºÏù∏');\n      }\n    })();\n    return () => {\n      mounted = false;\n      try {\n        var _jobRef$current, _jobRef$current$cance;\n        (_jobRef$current = jobRef.current) === null || _jobRef$current === void 0 ? void 0 : (_jobRef$current$cance = _jobRef$current.cancel) === null || _jobRef$current$cance === void 0 ? void 0 : _jobRef$current$cance.call(_jobRef$current);\n      } catch {}\n    };\n  }, [baseUrl, apiName]); // ‚úÖ ÌïÑÏöîÌïú ÏùòÏ°¥ÏÑ±Îßå\n\n  // Ï†ÑÏÜ°\n  const send = async () => {\n    if (busy) return;\n    if (!inputRef.current) return;\n    const text = inputRef.current.value.trim();\n    if (!text) return;\n    if (!client) {\n      alert('ÏÑúÎ≤Ñ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî.');\n      return;\n    }\n    const preHistory = [...history];\n    const nextHistory = [...history, {\n      role: 'user',\n      content: text\n    }];\n    setHistory(nextHistory);\n    renderFromHistory(nextHistory);\n    inputRef.current.value = '';\n    inputRef.current.style.height = 'auto';\n    try {\n      var _jobRef$current2, _jobRef$current2$canc;\n      (_jobRef$current2 = jobRef.current) === null || _jobRef$current2 === void 0 ? void 0 : (_jobRef$current2$canc = _jobRef$current2.cancel) === null || _jobRef$current2$canc === void 0 ? void 0 : _jobRef$current2$canc.call(_jobRef$current2);\n    } catch {}\n    setBusyUI(true);\n    try {\n      const job = client.submit(apiName, [text, preHistory, \"You are a helpful assistant.\", 0.3,\n      // temperature\n      0.9,\n      // top_p\n      40,\n      // top_k\n      512,\n      // max_new_tokens\n      1.05 // repetition_penalty\n      ], {\n        session_hash: sessionHash\n      });\n      setCurrentJob(job);\n      jobRef.current = job;\n      for await (const ev of job) {\n        if (ev.type === 'status') {\n          var _ref, _ref2, _ev$stage, _ev$status, _ev$status2;\n          const stage = (_ref = (_ref2 = (_ev$stage = ev.stage) !== null && _ev$stage !== void 0 ? _ev$stage : (_ev$status = ev.status) === null || _ev$status === void 0 ? void 0 : _ev$status.stage) !== null && _ref2 !== void 0 ? _ref2 : (_ev$status2 = ev.status) === null || _ev$status2 === void 0 ? void 0 : _ev$status2.status) !== null && _ref !== void 0 ? _ref : '';\n          if (stage === 'complete' || stage === 'error') {\n            finishReset();\n            break;\n          }\n          continue;\n        }\n        if (ev.type === 'data') {\n          const [chatState] = ev.data;\n          if (Array.isArray(chatState)) {\n            setHistory(chatState);\n            renderFromHistory(chatState);\n          }\n        }\n      }\n    } catch (e) {\n      console.error('stream error:', e);\n      updateStatus('Ïò§Î•ò Î∞úÏÉù');\n    } finally {\n      finishReset();\n    }\n  };\n\n  // ÏûÖÎ†• ÏûêÎèô ÎÜíÏù¥ & Îã®Ï∂ïÌÇ§\n  const onInput = () => {\n    if (!inputRef.current) return;\n    inputRef.current.style.height = 'auto';\n    inputRef.current.style.height = Math.min(inputRef.current.scrollHeight, 120) + 'px';\n  };\n  const onKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      send();\n    }\n  };\n\n  // Í∞ÑÎã®Ìïú Ïä§ÌÉÄÏùº(ÌÅ¥ÎûòÏä§Ïö©). Ï∂©Îèå Î∞©ÏßÄ ÏúÑÌï¥ Î≤îÏúÑÎ•º Ï¢ÅÌûå ÌÅ¥ÎûòÏä§ ÏÇ¨Ïö©\n  useEffect(() => {\n    const style = document.createElement('style');\n    style.innerHTML = `\n      .ai-root { background: #0f172a; color: #f8fafc; border-radius: 16px; overflow: hidden; }\n      .ai-header { background: #1e293b; border-bottom: 1px solid #334155; padding: 12px 16px; }\n      .ai-title { display:flex; align-items:center; gap:10px; font-weight:600; }\n      .ai-status { font-size:12px; color:#94a3b8; margin-top:4px; }\n      .ai-dot { width:8px; height:8px; border-radius:50%; display:inline-block; margin-right:6px; }\n      .ai-dot.online { background:#10b981; box-shadow:0 0 6px #10b981; }\n      .ai-dot.offline { background:#f59e0b; }\n      .ai-main { display:flex; flex-direction:column; height:38dvh; }\n      .ai-log { flex:1; overflow:auto; padding:16px; background:#1a1f35; display:flex; flex-direction:column; gap:12px; }\n      .ai-msg-wrap { display:flex; gap:10px; align-items:flex-end; opacity:0; transform:translateY(8px); transition:all .25s ease; }\n      .ai-msg-wrap.show { opacity:1; transform:translateY(0); }\n      .ai-user .ai-msg { background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; border-bottom-right-radius:4px; }\n      .ai-bot .ai-msg { background:#2d3748; color:#f8fafc; border:1px solid #334155; border-bottom-left-radius:4px; }\n      .ai-msg { padding:10px 14px; border-radius:16px; line-height:1.5; font-size:14px; max-width:65%; }\n      .ai-time { font-size:11px; color:#94a3b8; margin-top:2px; padding:0 6px; }\n      .ai-typing { display:none; gap:8px; align-items:center; padding:8px 16px; background:#1e293b; border-top:1px solid #334155; }\n      .ai-input { display:flex; gap:8px; padding:12px; background:#1e293b; border-top:1px solid #334155; }\n      .ai-input textarea { flex:1; background:#1a1f35; color:#f8fafc; border:2px solid #334155; border-radius:10px; padding:10px 12px; resize:none; min-height:40px; max-height:100px; }\n      .ai-input textarea::placeholder { color:#94a3b8; }\n      .ai-input button { min-width:72px; background: linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%); color:#fff; font-weight:600; border:none; border-radius:10px; padding:10px 14px; cursor:pointer; }\n      .ai-input button.disabled { opacity:.6; cursor:not-allowed; }\n      .ai-avatar { width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; flex-shrink:0; background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%); }\n      .ai-user .ai-avatar { background: linear-gradient(135deg,#f093fb 0%,#f5576c 100%); }\n    `;\n    document.head.appendChild(style);\n    return () => document.head.removeChild(style);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"ai-root\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ai-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ai-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ai-dot offline\",\n          ref: readyRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD53C\\uC2F1 \\uBC29\\uC5B4 AI \\uC5B4\\uC2DC\\uC2A4\\uD134\\uD2B8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ai-status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          id: \"status\",\n          ref: statusRef,\n          children: \"\\uB300\\uAE30 \\uC911\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ai-main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"log\",\n        className: \"ai-log\",\n        ref: logRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"typing-indicator\",\n        className: \"ai-typing\",\n        ref: typingRef,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ai-avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\uC785\\uB825 \\uC911...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ai-input\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"msg\",\n          ref: inputRef,\n          rows: 1,\n          placeholder: \"\\uC758\\uC2EC\\uC2A4\\uB7EC\\uC6B4 \\uBA54\\uC2DC\\uC9C0\\uB098 \\uB9C1\\uD06C\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694...\",\n          onInput: onInput,\n          onKeyDown: onKeyDown\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"send\",\n          ref: sendRef,\n          onClick: send,\n          children: \"\\uC804\\uC1A1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 5\n  }, this);\n}\n\n/** =========================\r\n * Î©îÏù∏ ÌéòÏù¥ÏßÄ (Í∏∞Ï°¥ ÏãúÎÆ¨Î†àÏù¥ÏÖò + AI ÏÑπÏÖò)\r\n * ========================= */\n_s(AIAssistant, \"NN1pZEX6u2yVJ7Da4bKc+zKJdg8=\");\n_c = AIAssistant;\nfunction SimulationPage() {\n  _s2();\n  const {\n    addToHistory\n  } = useContext(SimulationContext);\n  const [step, setStep] = useState(0);\n  const [userResponse, setUserResponse] = useState('');\n  const [chatLog, setChatLog] = useState([{\n    text: scenarios[0],\n    isBot: true\n  }]);\n  const [finished, setFinished] = useState(false);\n  const handleSubmit = () => {\n    if (!userResponse.trim()) return;\n    const feedback = evaluateResponse(userResponse);\n    const newChat = [{\n      text: userResponse,\n      isBot: false\n    }, {\n      text: feedback,\n      isBot: true\n    }];\n    setChatLog(prev => [...prev, ...newChat]);\n    addToHistory({\n      step,\n      message: scenarios[step],\n      userResponse,\n      feedback\n    });\n    setUserResponse('');\n    if (step < scenarios.length - 1) {\n      setTimeout(() => {\n        const nextStep = step + 1; // ÏïàÏ†ÑÌïòÍ≤å nextStep ÏÇ¨Ïö©\n        setStep(nextStep);\n        setChatLog(prev => [...prev, {\n          text: scenarios[nextStep],\n          isBot: true\n        }]);\n      }, 800);\n    } else {\n      setFinished(true);\n    }\n  };\n  const evaluateResponse = input => {\n    const norm = input.replace(/\\s+/g, '').trim();\n    if (/(Î¨¥Ïãú|ÏÇ≠Ï†ú|Ïã†Í≥†|Ï∞®Îã®|ÏùòÏã¨|Í≥†Í∞ùÏÑºÌÑ∞ÏßÅÏ†ëÏó∞ÎùΩ|ÌôïÏù∏Ï†ÑÌôî)/.test(norm)) {\n      return '‚úÖ Ïò¨Î∞îÎ•∏ ÎåÄÏùëÏûÖÎãàÎã§!';\n    } else if (/(ÌÅ¥Î¶≠|ÎàåÎü¨|ÎßÅÌÅ¨Ïó¥|ÏûÖÎ†•|Ï†ÑÏÜ°|Îã§Ïö¥Î°úÎìú)/.test(norm)) {\n      return '‚ùå ÏûòÎ™ªÎêú ÎåÄÏùëÏûÖÎãàÎã§. ÌîºÏã±Ïóê Ï£ºÏùòÌïòÏÑ∏Ïöî.';\n    }\n    return '‚ÑπÔ∏è ÌîºÏã± Î©îÏãúÏßÄÎäî ÌÅ¥Î¶≠ÌïòÏßÄ ÏïäÍ≥† Î¨¥ÏãúÌïòÍ±∞ÎÇò Ïã†Í≥†ÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏïÑÏöî.';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.page,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.wrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.header,\n        children: [/*#__PURE__*/_jsxDEV(BackButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styles.title,\n          children: \"\\uC2DC\\uBBAC\\uB808\\uC774\\uC158\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chatWrapper,\n        children: chatLog.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: msg.isBot ? styles.botBubble : styles.userBubble,\n          children: msg.text\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), !finished ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.inputWrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: userResponse,\n          onChange: e => setUserResponse(e.target.value),\n          onKeyDown: e => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              handleSubmit();\n            }\n          },\n          placeholder: \"\\uB2F5\\uBCC0\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694...\",\n          rows: 3,\n          style: styles.textArea\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmit,\n          style: styles.button,\n          disabled: !userResponse.trim(),\n          children: \"\\uB2F5\\uBCC0\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.finishedMessage,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uD83C\\uDF89 \\uC2DC\\uBBAC\\uB808\\uC774\\uC158\\uC774 \\uC644\\uB8CC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            ...styles.button,\n            backgroundColor: '#4caf50'\n          },\n          onClick: () => {\n            setStep(0);\n            setChatLog([{\n              text: scenarios[0],\n              isBot: true\n            }]);\n            setFinished(false);\n          },\n          children: \"\\uB2E4\\uC2DC \\uC2DC\\uC791\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          margin: '24px 0',\n          border: 'none',\n          height: 1,\n          background: '#e5e7eb'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AIAssistant, {\n        baseUrl: \"https://2b3b80943a762565f3.gradio.live\",\n        apiName: \"/chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 364,\n    columnNumber: 5\n  }, this);\n}\n\n/** =========================\r\n * Ïä§ÌÉÄÏùº\r\n * ========================= */\n_s2(SimulationPage, \"uc9nGC9SBgedWmDwyj9Y/sYo5EM=\");\n_c2 = SimulationPage;\nconst styles = {\n  page: {\n    backgroundColor: '#f9f9f9',\n    minHeight: '100dvh',\n    padding: '24px 16px 72px 16px',\n    fontFamily: \"'Segoe UI', sans-serif\",\n    display: 'flex',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    overscrollBehavior: 'none'\n  },\n  wrapper: {\n    maxWidth: '760px',\n    // AI ÏòÅÏó≠ Ìè¨Ìï®ÏùÑ Í≥†Î†§Ìï¥ ÏïΩÍ∞Ñ ÌôïÎåÄ\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '16px'\n  },\n  header: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '12px'\n  },\n  title: {\n    fontSize: '22px',\n    fontWeight: 'bold',\n    textAlign: 'center',\n    margin: '0 auto'\n  },\n  chatWrapper: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '12px',\n    flexGrow: 0,\n    overflowY: 'auto',\n    // ‚úÖ Ïä§ÌÅ¨Î°§ Í∞ÄÎä•\n    backgroundColor: '#fff',\n    borderRadius: '16px',\n    padding: '16px',\n    boxShadow: '0 4px 10px rgba(0,0,0,0.05)',\n    minHeight: '24dvh',\n    maxHeight: '40dvh',\n    // ‚úÖ ÎÇ¥Ïö© ÎßéÏùÑ Îïå ÏûòÎ¶º Î∞©ÏßÄ\n    width: '88%',\n    maxWidth: '640px',\n    alignSelf: 'center'\n  },\n  inputWrapper: {\n    marginTop: '8px',\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: '#fff',\n    borderRadius: '16px',\n    padding: '16px',\n    boxShadow: '0 4px 10px rgba(0,0,0,0.05)',\n    width: '88%',\n    maxWidth: '640px',\n    alignSelf: 'center',\n    marginBottom: '12px'\n  },\n  textArea: {\n    borderRadius: '10px',\n    padding: '12px',\n    border: '1px solid #ccc',\n    fontSize: '14px',\n    resize: 'none',\n    width: '100%',\n    // ‚úÖ '%' ‚Üí '100%'\n    minHeight: '80px'\n  },\n  button: {\n    marginTop: '10px',\n    backgroundColor: '#2196f3',\n    color: 'white',\n    padding: '12px',\n    border: 'none',\n    borderRadius: '8px',\n    fontWeight: 'bold',\n    fontSize: '15px',\n    cursor: 'pointer',\n    transition: 'background-color 0.2s ease'\n  },\n  botBubble: {\n    alignSelf: 'flex-start',\n    backgroundColor: '#addaffff',\n    color: '#333',\n    padding: '10px 14px',\n    borderRadius: '14px',\n    maxWidth: '85%',\n    wordBreak: 'keep-all'\n  },\n  userBubble: {\n    alignSelf: 'flex-end',\n    backgroundColor: '#2196f3',\n    color: 'white',\n    padding: '10px 14px',\n    borderRadius: '14px',\n    maxWidth: '85%',\n    wordBreak: 'keep-all'\n  },\n  finishedMessage: {\n    marginTop: '8px',\n    textAlign: 'center',\n    fontWeight: 'bold',\n    color: '#555'\n  }\n};\nexport default SimulationPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"AIAssistant\");\n$RefreshReg$(_c2, \"SimulationPage\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useMemo","useRef","SimulationContext","BackButton","Client","jsxDEV","_jsxDEV","scenarios","AIAssistant","baseUrl","apiName","_s","logRef","inputRef","sendRef","statusRef","readyRef","typingRef","history","setHistory","busy","setBusy","client","setClient","currentJob","setCurrentJob","jobRef","sessionHash","crypto","randomUUID","getTime","Date","toLocaleTimeString","hour","minute","showTyping","show","current","style","display","updateStatus","text","generating","textContent","classList","toggle","setDotOnline","online","setBusyUI","b","disabled","finishReset","focus","appendBubble","role","content","logEl","wrap","document","createElement","className","avatar","container","bubble","time","appendChild","requestAnimationFrame","add","scrollTop","scrollHeight","renderFromHistory","arr","innerHTML","m","mounted","c","connect","events","setTimeout","prev","next","err","console","error","_jobRef$current","_jobRef$current$cance","cancel","call","send","value","trim","alert","preHistory","nextHistory","height","_jobRef$current2","_jobRef$current2$canc","job","submit","session_hash","ev","type","_ref","_ref2","_ev$stage","_ev$status","_ev$status2","stage","status","chatState","data","Array","isArray","e","onInput","Math","min","onKeyDown","key","shiftKey","preventDefault","head","removeChild","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","id","rows","placeholder","onClick","_c","SimulationPage","_s2","addToHistory","step","setStep","userResponse","setUserResponse","chatLog","setChatLog","isBot","finished","setFinished","handleSubmit","feedback","evaluateResponse","newChat","message","length","nextStep","input","norm","replace","test","styles","page","wrapper","header","title","chatWrapper","map","msg","idx","botBubble","userBubble","inputWrapper","onChange","target","textArea","button","finishedMessage","backgroundColor","margin","border","background","_c2","minHeight","padding","fontFamily","justifyContent","overflow","overscrollBehavior","maxWidth","width","flexDirection","gap","alignItems","fontSize","fontWeight","textAlign","flexGrow","overflowY","borderRadius","boxShadow","maxHeight","alignSelf","marginTop","marginBottom","resize","color","cursor","transition","wordBreak","$RefreshReg$"],"sources":["C:/Users/Cheol/Desktop/front_end/src/pages/SimulationPage.js"],"sourcesContent":["// src/pages/SimulationPage.jsx\r\nimport React, { useState, useContext, useEffect, useMemo, useRef } from 'react';\r\nimport { SimulationContext } from '../context/SimulationContext';\r\nimport BackButton from '../components/BackButton';\r\nimport { Client } from '@gradio/client';\r\n\r\n/** =========================\r\n * Í∏∞Ï°¥ ÏãúÎÇòÎ¶¨Ïò§ (ÏõêÎ≥∏ Ïú†ÏßÄ + ÏÜåÏÜåÌïú Í∞úÏÑ†)\r\n * ========================= */\r\nconst scenarios = [\r\n  \"[OOÏùÄÌñâ] Í≥†Í∞ùÎãòÏùò Í≥ÑÏ¢åÍ∞Ä Ï†ïÏßÄÎêòÏóàÏäµÎãàÎã§. Î≥µÍµ¨Î•º ÏõêÌïòÏãúÎ©¥ ÎßÅÌÅ¨Î•º ÌÅ¥Î¶≠Ìï¥ Ï£ºÏÑ∏Ïöî: http://fakebank.com\",\r\n  \"Î≥µÍµ¨Î•º ÏúÑÌï¥ Ïù∏Ï¶ùÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.\",\r\n  \"Ïù∏Ï¶ùÏù¥ ÌôïÏù∏ÎêòÏßÄ ÏïäÏúºÎ©¥ Í≥ÑÏ¢åÍ∞Ä ÌèêÏáÑÎê©ÎãàÎã§. ÏßÄÍ∏à Î∞îÎ°ú Ï≤òÎ¶¨ÌïòÏÑ∏Ïöî.\",\r\n];\r\n\r\n/** =========================\r\n * Gradio AI Ïñ¥ÏãúÏä§ÌÑ¥Ìä∏ (ÎÇ¥Î∂Ä Ïª¥Ìè¨ÎÑåÌä∏)\r\n * - HTML Ïù∏ÎùºÏù∏ Ïä§ÌÅ¨Î¶ΩÌä∏Î•º React/JSÎ°ú Î≥ÄÌôò\r\n * - Ïô∏Î∂Ä script ÌÉúÍ∑∏ Î∂àÌïÑÏöî\r\n * ========================= */\r\nfunction AIAssistant({\r\n  baseUrl = \"https://2b3b80943a762565f3.gradio.live\",\r\n  apiName = \"/chat\",\r\n}) {\r\n  // DOM refs\r\n  const logRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n  const sendRef = useRef(null);\r\n  const statusRef = useRef(null);\r\n  const readyRef = useRef(null);\r\n  const typingRef = useRef(null);\r\n\r\n  // ÏÉÅÌÉú\r\n  const [history, setHistory] = useState([]);\r\n  const [busy, setBusy] = useState(false);\r\n  const [client, setClient] = useState(null);\r\n  const [currentJob, setCurrentJob] = useState(null);\r\n\r\n  // ÏßÑÌñâ Ï§ë ÏûëÏóÖ ref(ÌÅ¥Î¶∞ÏóÖÏö©)\r\n  const jobRef = useRef(null);\r\n\r\n  // ÏÑ∏ÏÖò Ìï¥Ïãú\r\n  const sessionHash = useMemo(() => crypto.randomUUID(), []);\r\n\r\n  // ÏãúÍ∞Ñ Ìè¨Îß∑\r\n  const getTime = () =>\r\n    new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });\r\n\r\n  // ÏÉÅÌÉú/ÌëúÏãú Ïú†Ìã∏\r\n  const showTyping = (show) => {\r\n    if (typingRef.current) typingRef.current.style.display = show ? 'flex' : 'none';\r\n  };\r\n  const updateStatus = (text, generating = false) => {\r\n    if (statusRef.current) {\r\n      statusRef.current.textContent = text;\r\n      statusRef.current.classList.toggle('generating', generating);\r\n    }\r\n  };\r\n  const setDotOnline = (online) => {\r\n    if (!readyRef.current) return;\r\n    readyRef.current.classList.toggle('online', online);\r\n    readyRef.current.classList.toggle('offline', !online);\r\n  };\r\n  const setBusyUI = (b) => {\r\n    setBusy(b);\r\n    showTyping(b);\r\n    if (sendRef.current) {\r\n      sendRef.current.disabled = b;\r\n      sendRef.current.classList.toggle('disabled', b);\r\n    }\r\n    updateStatus(b ? 'ÎãµÎ≥Ä ÏÉùÏÑ± Ï§ë' : 'Ïò®ÎùºÏù∏', b);\r\n  };\r\n  const finishReset = () => {\r\n    setBusyUI(false);\r\n    if (inputRef.current) inputRef.current.focus();\r\n    setCurrentJob(null);\r\n    jobRef.current = null;\r\n  };\r\n\r\n  // ÎßêÌíçÏÑ† Î†åÎçî (CSS ÌÅ¥ÎûòÏä§ÏôÄ ÏùºÏπò)\r\n  const appendBubble = (role, content) => {\r\n    const logEl = logRef.current;\r\n    if (!logEl) return;\r\n\r\n    const wrap = document.createElement('div');\r\n    wrap.className = role === 'user' ? 'ai-msg-wrap ai-user' : 'ai-msg-wrap ai-bot';\r\n\r\n    const avatar = document.createElement('div');\r\n    avatar.className = 'ai-avatar';\r\n\r\n    const container = document.createElement('div');\r\n\r\n    const bubble = document.createElement('div');\r\n    bubble.className = 'ai-msg';\r\n    bubble.textContent = content;\r\n\r\n    const time = document.createElement('div');\r\n    time.className = 'ai-time';\r\n    time.textContent = getTime();\r\n\r\n    container.appendChild(bubble);\r\n    container.appendChild(time);\r\n\r\n    if (role === 'user') {\r\n      wrap.appendChild(container);\r\n      wrap.appendChild(avatar);\r\n    } else {\r\n      wrap.appendChild(avatar);\r\n      wrap.appendChild(container);\r\n    }\r\n\r\n    logEl.appendChild(wrap);\r\n    requestAnimationFrame(() => wrap.classList.add('show'));\r\n    logEl.scrollTop = logEl.scrollHeight;\r\n  };\r\n\r\n  const renderFromHistory = (arr) => {\r\n    const logEl = logRef.current;\r\n    if (!logEl) return;\r\n    logEl.innerHTML = '';\r\n    for (const m of arr) appendBubble(m.role, m.content);\r\n  };\r\n\r\n  // Ï¥àÍ∏∞ Ïó∞Í≤∞ (ÎèôÏ†Å importÎ°ú Client Î°úÎìú)\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const { Client } = await import('https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js');\r\n        if (!mounted) return;\r\n\r\n        const c = await Client.connect(baseUrl, { events: ['data', 'status'] });\r\n        setClient(c);\r\n\r\n        setDotOnline(true);\r\n        updateStatus('Ïò®ÎùºÏù∏');\r\n        if (inputRef.current) inputRef.current.focus();\r\n\r\n        setTimeout(() => {\r\n          setHistory((prev) => {\r\n            const next = [\r\n              ...prev,\r\n              {\r\n                role: 'assistant',\r\n                content: 'ÏïàÎÖïÌïòÏÑ∏Ïöî! ÌîºÏã± Î∞©Ïñ¥ AI Ïñ¥ÏãúÏä§ÌÑ¥Ìä∏ÏûÖÎãàÎã§. ÏùòÏã¨Ïä§Îü¨Ïö¥ Î©îÏãúÏßÄÎÇò ÎßÅÌÅ¨Í∞Ä ÏûàÏúºÏãúÎ©¥ Ïñ∏Ï†úÎì† ÏßàÎ¨∏Ìï¥Ï£ºÏÑ∏Ïöî. üõ°Ô∏è',\r\n              },\r\n            ];\r\n            renderFromHistory(next);\r\n            return next;\r\n          });\r\n        }, 300);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setDotOnline(false);\r\n        updateStatus('Ïò§ÌîÑÎùºÏù∏');\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      mounted = false;\r\n      try { jobRef.current?.cancel?.(); } catch {}\r\n    };\r\n  }, [baseUrl, apiName]); // ‚úÖ ÌïÑÏöîÌïú ÏùòÏ°¥ÏÑ±Îßå\r\n\r\n  // Ï†ÑÏÜ°\r\n  const send = async () => {\r\n    if (busy) return;\r\n    if (!inputRef.current) return;\r\n\r\n    const text = inputRef.current.value.trim();\r\n    if (!text) return;\r\n    if (!client) {\r\n      alert('ÏÑúÎ≤Ñ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî.');\r\n      return;\r\n    }\r\n\r\n    const preHistory = [...history];\r\n    const nextHistory = [...history, { role: 'user', content: text }];\r\n    setHistory(nextHistory);\r\n    renderFromHistory(nextHistory);\r\n    inputRef.current.value = '';\r\n    inputRef.current.style.height = 'auto';\r\n\r\n    try { jobRef.current?.cancel?.(); } catch {}\r\n\r\n    setBusyUI(true);\r\n\r\n    try {\r\n      const job = client.submit(\r\n        apiName,\r\n        [\r\n          text,\r\n          preHistory,\r\n          \"You are a helpful assistant.\",\r\n          0.3,    // temperature\r\n          0.9,    // top_p\r\n          40,     // top_k\r\n          512,    // max_new_tokens\r\n          1.05    // repetition_penalty\r\n        ],\r\n        { session_hash: sessionHash }\r\n      );\r\n      setCurrentJob(job);\r\n      jobRef.current = job;\r\n\r\n      for await (const ev of job) {\r\n        if (ev.type === 'status') {\r\n          const stage = ev.stage ?? ev.status?.stage ?? ev.status?.status ?? '';\r\n          if (stage === 'complete' || stage === 'error') {\r\n            finishReset();\r\n            break;\r\n          }\r\n          continue;\r\n        }\r\n        if (ev.type === 'data') {\r\n          const [chatState] = ev.data;\r\n          if (Array.isArray(chatState)) {\r\n            setHistory(chatState);\r\n            renderFromHistory(chatState);\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error('stream error:', e);\r\n      updateStatus('Ïò§Î•ò Î∞úÏÉù');\r\n    } finally {\r\n      finishReset();\r\n    }\r\n  };\r\n\r\n  // ÏûÖÎ†• ÏûêÎèô ÎÜíÏù¥ & Îã®Ï∂ïÌÇ§\r\n  const onInput = () => {\r\n    if (!inputRef.current) return;\r\n    inputRef.current.style.height = 'auto';\r\n    inputRef.current.style.height = Math.min(inputRef.current.scrollHeight, 120) + 'px';\r\n  };\r\n  const onKeyDown = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      send();\r\n    }\r\n  };\r\n\r\n  // Í∞ÑÎã®Ìïú Ïä§ÌÉÄÏùº(ÌÅ¥ÎûòÏä§Ïö©). Ï∂©Îèå Î∞©ÏßÄ ÏúÑÌï¥ Î≤îÏúÑÎ•º Ï¢ÅÌûå ÌÅ¥ÎûòÏä§ ÏÇ¨Ïö©\r\n  useEffect(() => {\r\n    const style = document.createElement('style');\r\n    style.innerHTML = `\r\n      .ai-root { background: #0f172a; color: #f8fafc; border-radius: 16px; overflow: hidden; }\r\n      .ai-header { background: #1e293b; border-bottom: 1px solid #334155; padding: 12px 16px; }\r\n      .ai-title { display:flex; align-items:center; gap:10px; font-weight:600; }\r\n      .ai-status { font-size:12px; color:#94a3b8; margin-top:4px; }\r\n      .ai-dot { width:8px; height:8px; border-radius:50%; display:inline-block; margin-right:6px; }\r\n      .ai-dot.online { background:#10b981; box-shadow:0 0 6px #10b981; }\r\n      .ai-dot.offline { background:#f59e0b; }\r\n      .ai-main { display:flex; flex-direction:column; height:38dvh; }\r\n      .ai-log { flex:1; overflow:auto; padding:16px; background:#1a1f35; display:flex; flex-direction:column; gap:12px; }\r\n      .ai-msg-wrap { display:flex; gap:10px; align-items:flex-end; opacity:0; transform:translateY(8px); transition:all .25s ease; }\r\n      .ai-msg-wrap.show { opacity:1; transform:translateY(0); }\r\n      .ai-user .ai-msg { background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; border-bottom-right-radius:4px; }\r\n      .ai-bot .ai-msg { background:#2d3748; color:#f8fafc; border:1px solid #334155; border-bottom-left-radius:4px; }\r\n      .ai-msg { padding:10px 14px; border-radius:16px; line-height:1.5; font-size:14px; max-width:65%; }\r\n      .ai-time { font-size:11px; color:#94a3b8; margin-top:2px; padding:0 6px; }\r\n      .ai-typing { display:none; gap:8px; align-items:center; padding:8px 16px; background:#1e293b; border-top:1px solid #334155; }\r\n      .ai-input { display:flex; gap:8px; padding:12px; background:#1e293b; border-top:1px solid #334155; }\r\n      .ai-input textarea { flex:1; background:#1a1f35; color:#f8fafc; border:2px solid #334155; border-radius:10px; padding:10px 12px; resize:none; min-height:40px; max-height:100px; }\r\n      .ai-input textarea::placeholder { color:#94a3b8; }\r\n      .ai-input button { min-width:72px; background: linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%); color:#fff; font-weight:600; border:none; border-radius:10px; padding:10px 14px; cursor:pointer; }\r\n      .ai-input button.disabled { opacity:.6; cursor:not-allowed; }\r\n      .ai-avatar { width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; flex-shrink:0; background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%); }\r\n      .ai-user .ai-avatar { background: linear-gradient(135deg,#f093fb 0%,#f5576c 100%); }\r\n    `;\r\n    document.head.appendChild(style);\r\n    return () => document.head.removeChild(style);\r\n  }, []);\r\n\r\n  return (\r\n    <section className=\"ai-root\">\r\n      <div className=\"ai-header\">\r\n        <div className=\"ai-title\">\r\n          <span className=\"ai-dot offline\" ref={readyRef} />\r\n          <span>ÌîºÏã± Î∞©Ïñ¥ AI Ïñ¥ÏãúÏä§ÌÑ¥Ìä∏</span>\r\n        </div>\r\n        <div className=\"ai-status\">\r\n          <span id=\"status\" ref={statusRef}>ÎåÄÍ∏∞ Ï§ë</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"ai-main\">\r\n        <div id=\"log\" className=\"ai-log\" ref={logRef} />\r\n\r\n        <div id=\"typing-indicator\" className=\"ai-typing\" ref={typingRef}>\r\n          <div className=\"ai-avatar\" />\r\n          <div>ÏûÖÎ†• Ï§ë...</div>\r\n        </div>\r\n\r\n        <div className=\"ai-input\">\r\n          <textarea\r\n            id=\"msg\"\r\n            ref={inputRef}\r\n            rows={1}\r\n            placeholder=\"ÏùòÏã¨Ïä§Îü¨Ïö¥ Î©îÏãúÏßÄÎÇò ÎßÅÌÅ¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...\"\r\n            onInput={onInput}\r\n            onKeyDown={onKeyDown}\r\n          />\r\n          <button id=\"send\" ref={sendRef} onClick={send}>Ï†ÑÏÜ°</button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n/** =========================\r\n * Î©îÏù∏ ÌéòÏù¥ÏßÄ (Í∏∞Ï°¥ ÏãúÎÆ¨Î†àÏù¥ÏÖò + AI ÏÑπÏÖò)\r\n * ========================= */\r\nfunction SimulationPage() {\r\n  const { addToHistory } = useContext(SimulationContext);\r\n  const [step, setStep] = useState(0);\r\n  const [userResponse, setUserResponse] = useState('');\r\n  const [chatLog, setChatLog] = useState([{ text: scenarios[0], isBot: true }]);\r\n  const [finished, setFinished] = useState(false);\r\n\r\n  const handleSubmit = () => {\r\n    if (!userResponse.trim()) return;\r\n\r\n    const feedback = evaluateResponse(userResponse);\r\n    const newChat = [\r\n      { text: userResponse, isBot: false },\r\n      { text: feedback, isBot: true },\r\n    ];\r\n\r\n    setChatLog(prev => [...prev, ...newChat]);\r\n\r\n    addToHistory({\r\n      step,\r\n      message: scenarios[step],\r\n      userResponse,\r\n      feedback,\r\n    });\r\n\r\n    setUserResponse('');\r\n\r\n    if (step < scenarios.length - 1) {\r\n      setTimeout(() => {\r\n        const nextStep = step + 1; // ÏïàÏ†ÑÌïòÍ≤å nextStep ÏÇ¨Ïö©\r\n        setStep(nextStep);\r\n        setChatLog(prev => [...prev, { text: scenarios[nextStep], isBot: true }]);\r\n      }, 800);\r\n    } else {\r\n      setFinished(true);\r\n    }\r\n  };\r\n\r\n  const evaluateResponse = (input) => {\r\n    const norm = input.replace(/\\s+/g, '').trim();\r\n    if (/(Î¨¥Ïãú|ÏÇ≠Ï†ú|Ïã†Í≥†|Ï∞®Îã®|ÏùòÏã¨|Í≥†Í∞ùÏÑºÌÑ∞ÏßÅÏ†ëÏó∞ÎùΩ|ÌôïÏù∏Ï†ÑÌôî)/.test(norm)) {\r\n      return '‚úÖ Ïò¨Î∞îÎ•∏ ÎåÄÏùëÏûÖÎãàÎã§!';\r\n    } else if (/(ÌÅ¥Î¶≠|ÎàåÎü¨|ÎßÅÌÅ¨Ïó¥|ÏûÖÎ†•|Ï†ÑÏÜ°|Îã§Ïö¥Î°úÎìú)/.test(norm)) {\r\n      return '‚ùå ÏûòÎ™ªÎêú ÎåÄÏùëÏûÖÎãàÎã§. ÌîºÏã±Ïóê Ï£ºÏùòÌïòÏÑ∏Ïöî.';\r\n    }\r\n    return '‚ÑπÔ∏è ÌîºÏã± Î©îÏãúÏßÄÎäî ÌÅ¥Î¶≠ÌïòÏßÄ ÏïäÍ≥† Î¨¥ÏãúÌïòÍ±∞ÎÇò Ïã†Í≥†ÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏïÑÏöî.';\r\n  };\r\n\r\n  return (\r\n    <div style={styles.page}>\r\n      <div style={styles.wrapper}>\r\n        {/* ÏÉÅÎã® Ìó§Îçî */}\r\n        <div style={styles.header}>\r\n          <BackButton />\r\n          <h2 style={styles.title}>ÏãúÎÆ¨Î†àÏù¥ÏÖò</h2>\r\n        </div>\r\n\r\n        {/* ÏãúÎÇòÎ¶¨Ïò§ Ï±ÑÌåÖ */}\r\n        <div style={styles.chatWrapper}>\r\n          {chatLog.map((msg, idx) => (\r\n            <div\r\n              key={idx}\r\n              style={msg.isBot ? styles.botBubble : styles.userBubble}\r\n            >\r\n              {msg.text}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* ÏûÖÎ†• ÏòÅÏó≠ */}\r\n        {!finished ? (\r\n          <div style={styles.inputWrapper}>\r\n            <textarea\r\n              value={userResponse}\r\n              onChange={(e) => setUserResponse(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter' && !e.shiftKey) {\r\n                  e.preventDefault();\r\n                  handleSubmit();\r\n                }\r\n              }}\r\n              placeholder=\"ÎãµÎ≥ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî...\"\r\n              rows={3}\r\n              style={styles.textArea}\r\n            />\r\n            <button\r\n              onClick={handleSubmit}\r\n              style={styles.button}\r\n              disabled={!userResponse.trim()}\r\n            >\r\n              ÎãµÎ≥ÄÌïòÍ∏∞\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div style={styles.finishedMessage}>\r\n            <p>üéâ ÏãúÎÆ¨Î†àÏù¥ÏÖòÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.</p>\r\n            <button\r\n              style={{ ...styles.button, backgroundColor: '#4caf50' }}\r\n              onClick={() => {\r\n                setStep(0);\r\n                setChatLog([{ text: scenarios[0], isBot: true }]);\r\n                setFinished(false);\r\n              }}\r\n            >\r\n              Îã§Ïãú ÏãúÏûë\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Íµ¨Î∂ÑÏÑ† */}\r\n        <hr style={{ margin: '24px 0', border: 'none', height: 1, background: '#e5e7eb' }} />\r\n\r\n        {/* AI Ïñ¥ÏãúÏä§ÌÑ¥Ìä∏ (HTML ÏΩîÎìúÏùò Î°úÏßÅÏùÑ ReactÎ°ú Î≥ÄÌôòÌï¥ Ï†ÅÏö©) */}\r\n        <AIAssistant\r\n          baseUrl=\"https://2b3b80943a762565f3.gradio.live\"\r\n          apiName=\"/chat\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/** =========================\r\n * Ïä§ÌÉÄÏùº\r\n * ========================= */\r\nconst styles = {\r\n  page: {\r\n    backgroundColor: '#f9f9f9',\r\n    minHeight: '100dvh',\r\n    padding: '24px 16px 72px 16px',\r\n    fontFamily: \"'Segoe UI', sans-serif\",\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    overflow: 'hidden',\r\n    overscrollBehavior: 'none',\r\n  },\r\n  wrapper: {\r\n    maxWidth: '760px', // AI ÏòÅÏó≠ Ìè¨Ìï®ÏùÑ Í≥†Î†§Ìï¥ ÏïΩÍ∞Ñ ÌôïÎåÄ\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '16px',\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px',\r\n  },\r\n  title: {\r\n    fontSize: '22px',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n    margin: '0 auto',\r\n  },\r\n  chatWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '12px',\r\n    flexGrow: 0,\r\n    overflowY: 'auto',           // ‚úÖ Ïä§ÌÅ¨Î°§ Í∞ÄÎä•\r\n    backgroundColor: '#fff',\r\n    borderRadius: '16px',\r\n    padding: '16px',\r\n    boxShadow: '0 4px 10px rgba(0,0,0,0.05)',\r\n    minHeight: '24dvh',\r\n    maxHeight: '40dvh',          // ‚úÖ ÎÇ¥Ïö© ÎßéÏùÑ Îïå ÏûòÎ¶º Î∞©ÏßÄ\r\n    width: '88%',\r\n    maxWidth: '640px',\r\n    alignSelf: 'center',\r\n  },\r\n  inputWrapper: {\r\n    marginTop: '8px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    backgroundColor: '#fff',\r\n    borderRadius: '16px',\r\n    padding: '16px',\r\n    boxShadow: '0 4px 10px rgba(0,0,0,0.05)',\r\n    width: '88%',\r\n    maxWidth: '640px',\r\n    alignSelf: 'center',\r\n    marginBottom: '12px',\r\n  },\r\n  textArea: {\r\n    borderRadius: '10px',\r\n    padding: '12px',\r\n    border: '1px solid #ccc',\r\n    fontSize: '14px',\r\n    resize: 'none',\r\n    width: '100%',               // ‚úÖ '%' ‚Üí '100%'\r\n    minHeight: '80px',\r\n  },\r\n  button: {\r\n    marginTop: '10px',\r\n    backgroundColor: '#2196f3',\r\n    color: 'white',\r\n    padding: '12px',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    fontWeight: 'bold',\r\n    fontSize: '15px',\r\n    cursor: 'pointer',\r\n    transition: 'background-color 0.2s ease',\r\n  },\r\n  botBubble: {\r\n    alignSelf: 'flex-start',\r\n    backgroundColor: '#addaffff',\r\n    color: '#333',\r\n    padding: '10px 14px',\r\n    borderRadius: '14px',\r\n    maxWidth: '85%',\r\n    wordBreak: 'keep-all',\r\n  },\r\n  userBubble: {\r\n    alignSelf: 'flex-end',\r\n    backgroundColor: '#2196f3',\r\n    color: 'white',\r\n    padding: '10px 14px',\r\n    borderRadius: '14px',\r\n    maxWidth: '85%',\r\n    wordBreak: 'keep-all',\r\n  },\r\n  finishedMessage: {\r\n    marginTop: '8px',\r\n    textAlign: 'center',\r\n    fontWeight: 'bold',\r\n    color: '#555',\r\n  },\r\n};\r\n\r\nexport default SimulationPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}